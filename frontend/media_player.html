<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>frontend</title>
</head>
<body style="opacity:1; margin:0px">

    <div class="b-hero-page-content"></div>

    <script>

        let elements = [document.getElementsByClassName("b-hero-page-content")[0]];

        let x = [0];
        let y = [0];
        let width = [0];
        let height = [0];
        let background_color = [0];
        let text = [0];
        let border_radius = [0];

        for (let i = 1; i < 8; i++) {
            elements.push(document.createElement("div"));
            elements[i].style.position = "absolute";
            elements[i].style.margin = "0px";
            elements[i].style.padding = "0px";
            elements[i].style.border = "none";
            elements[i].style.left = "0px";
            elements[i].style.top = "0px";
            elements[i].style.width = "0px";
            elements[i].style.height = "0px";
            elements[i].style.zIndex = "0";
            elements[i].style.overflow = "hidden";
            elements[0].append(elements[i]);

            x.push(0);
            y.push(0);
            width.push(0);
            height.push(0);
            background_color.push([255, 255, 255, 1]);
            text.push("init");
            border_radius.push(0);
        }

        let e_play_button = 1;
        let e_progress_bar = 2;
        let e_progress_indicator = 3;
        let e_playhead = 4;
        let e_time_current = 5;
        let e_time_left = 6;

        let audio = document.createElement("audio");
        elements[0].append(audio);
        // set audio src

        // @TEST
        elements[0].style.width = "600px";
        elements[0].style.height = "500px";
        elements[0].style.border = "solid";
        elements[0].style.padding = "0px";
        elements[0].style.margin = "0px";

        function update_player() {

            // e_progress_bar
            background_color[2] = [200, 200, 200, 1];
            x[2] = 50;
            width[2] = (width[0] - x[2]) - 50;
            height[2] = 10;
            y[2] = height[0] - height[2] - (height[2] / 2);
            border_radius[2] = 10;

            // e_progress_indicator
            background_color[3] = [240, 175, 11, 1];
            x[3] = 50;
            width[3] = 50;
            height[3] = 10;
            y[3] = height[0] - height[3] - (height[3] / 2);
            border_radius[3] = 10;
        }


        function update() {

            width[0] = parseInt(elements[0].style.width.replace("px", ""));
            height[0] = parseInt(elements[0].style.height.replace("px", ""));

            update_player();

            for (let i = 1; i < elements.length; i++) {
                elements[i].style.transform = "translate(" + x[i] + "px, " + y[i] + "px)";
                elements[i].style.width = width[i] + "px";
                elements[i].style.height = height[i] + "px";
                elements[i].style.backgroundColor = "rgba(" + background_color[i][0] + "," + background_color[i][1] + "," + background_color[i][2] + "," + background_color[i][3] + ")";
                elements[i].style.text = text[i];
                elements[i].style.borderRadius = border_radius[i] + "px";
            }

            console.log(width[0]);
            console.log(height[0]);

            //window.requestAnimationFrame(update);
        }

        update();


    </script>
</body>
</html>